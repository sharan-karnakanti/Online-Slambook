(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.RModal = factory());
}(this, function () {

    var is = function (obj, type) { return Object.prototype.toString.call(obj).toLowerCase() === ("[object " + type + "]"); };

    var addClass = function (el, cls) {
        var arr = el.className
        .split(/\s+/)
        .filter(function (c) { return !!c && c == cls; });

        if (!arr.length) {
            el.className += " " + cls;
        }
    }

    var removeClass = function (el, cls) {
        el.className = el.className
        .split(/\s+/)
        .filter(function (c) { return !!c && c != cls; })
        .join(' ');
    }

    var RModal = function RModal(el, opts) {
        var this$1 = this;

        this.opened = false;

        this.opts = {
            bodyClass: 'modal-open'
            , dialogClass: 'modal-dialog'
            , dialogOpenClass: 'bounceInDown'
            , dialogCloseClass: 'bounceOutUp'

            , focus: true
            , focusElements: [
                'a[href]', 'area[href]', 'input:not([disabled]):not([type=hidden])'
                , 'button:not([disabled])', 'select:not([disabled])'
                , 'textarea:not([disabled])', 'iframe', 'object', 'embed'
                , '*[tabindex]', '*[contenteditable]'
            ]

            , escapeClose: true
            , content: null
        };

        Object.keys(opts || {})
        .forEach(function (key) {
            /* istanbul ignore else */
            if (opts[key] !== undefined) {
                this$1.opts[key] = opts[key];
            }
        });

        this.overlay = el;
        this.dialog = el.querySelector(("." + (this.opts.dialogClass)));

        if (this.opts.content) {
            this.content(this.opts.content);
        }
    };

    RModal.prototype.open = function open (content) {
            var this$1 = this;

        this.content(content);

        if (!is(this.opts.beforeOpen, 'function')) {
            return this._doOpen();
        }

        this.opts.beforeOpen(function () {
            this$1._doOpen();
        });
    };

    RModal.prototype._doOpen = function _doOpen () {
        addClass(document.body, this.opts.bodyClass);

        removeClass(this.dialog, this.opts.dialogCloseClass);
        addClass(this.dialog, this.opts.dialogOpenClass);

        this.overlay.style.display = 'block';

        if (this.opts.focus) {
            this.focusOutElement = document.activeElement;
            this.focus();
        }

        if (is(this.opts.afterOpen, 'function')) {
            this.opts.afterOpen();
        }
        this.opened = true;
    };

    RModal.prototype.close = function close () {
            var this$1 = this;

        if (!is(this.opts.beforeClose, 'function')) {
            return this._doClose();
        }

        this.opts.beforeClose(function () {
            this$1._doClose();
        });
    };

    RModal.prototype._doClose = function _doClose () {
            var this$1 = this;

        removeClass(this.dialog, this.opts.dialogOpenClass);
        addClass(this.dialog, this.opts.dialogCloseClass);

        removeClass(document.body, this.opts.bodyClass);

        if (this.opts.focus) {
            this.focus(this.focusOutElement);
        }

        if (is(this.opts.afterClose, 'function')) {
            this.opts.afterClose();
        }

        this.opened = false;
        setTimeout(function () {
            this$1.overlay.style.display = 'none';
        }, 500);
    };

    RModal.prototype.content = function content (content) {
        if (content === undefined) {
            return this.dialog.innerHTML;
        }

        this.dialog.innerHTML = content;
    };

    RModal.prototype.elements = function elements (selector, fallback) {
        fallback = fallback || window.navigator.appVersion.indexOf('MSIE 9.0') > -1;
        selector = is(selector, 'array') ? selector.join(',') : selector;

        return [].filter.call(
            this.dialog.querySelectorAll(selector)
            , function (element) {
                if (fallback) {
                    var style = window.getComputedStyle(element);
                    return style.display !== 'none' && style.visibility !== 'hidden';
                }

                return element.offsetParent !== null;
            }
        );
    };

    RModal.prototype.focus = function focus (el) {
        el = el || this.elements(this.opts.focusElements)[0] || this.dialog.firstChild;

        if (el && is(el.focus, 'function')) {
            el.focus();
        }
    };

    RModal.prototype.keydown = function keydown (ev) {
        if (this.opts.escapeClose && ev.which == 27) {
            this.close();
        }

        function stopEvent() {
            ev.preventDefault();
            ev.stopPropagation();
        }

        if (this.opened && ev.which == 9 && this.dialog.contains(ev.target)) {
            var elements = this.elements(this.opts.focusElements)
                , first = elements[0]
                , last = elements[elements.length - 1];

            if (first == last) {
                stopEvent();
            }
            else if (ev.target == first && ev.shiftKey) {
                stopEvent();
                last.focus();
            }
            else if (ev.target == last && !ev.shiftKey) {
                stopEvent();
                first.focus();
            }
        }
    };

    RModal.prototype.version = '1.0.21';
    RModal.version = '1.0.21';

    return RModal;

}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy93aXNoL0Rlc2t0b3Avcm1vZGFsLmpzL3NyYy9ybW9kYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5sZXQgaXMgPSAob2JqLCB0eXBlKSA9PiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKS50b0xvd2VyQ2FzZSgpID09PSBgW29iamVjdCAke3R5cGV9XWA7XG5cbmxldCBhZGRDbGFzcyA9IChlbCwgY2xzKSA9PiB7XG4gICAgbGV0IGFyciA9IGVsLmNsYXNzTmFtZVxuICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgLmZpbHRlcigoYykgPT4gISFjICYmIGMgPT0gY2xzKTtcblxuICAgIGlmICghYXJyLmxlbmd0aCkge1xuICAgICAgICBlbC5jbGFzc05hbWUgKz0gYCAke2Nsc31gO1xuICAgIH1cbn1cblxubGV0IHJlbW92ZUNsYXNzID0gKGVsLCBjbHMpID0+IHtcbiAgICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWVcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5maWx0ZXIoKGMpID0+ICEhYyAmJiBjICE9IGNscylcbiAgICAuam9pbignICcpO1xufVxuXG5jbGFzcyBSTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKGVsLCBvcHRzKSB7XG4gICAgICAgIHRoaXMub3BlbmVkID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5vcHRzID0ge1xuICAgICAgICAgICAgYm9keUNsYXNzOiAnbW9kYWwtb3BlbidcbiAgICAgICAgICAgICwgZGlhbG9nQ2xhc3M6ICdtb2RhbC1kaWFsb2cnXG4gICAgICAgICAgICAsIGRpYWxvZ09wZW5DbGFzczogJ2JvdW5jZUluRG93bidcbiAgICAgICAgICAgICwgZGlhbG9nQ2xvc2VDbGFzczogJ2JvdW5jZU91dFVwJ1xuXG4gICAgICAgICAgICAsIGZvY3VzOiB0cnVlXG4gICAgICAgICAgICAsIGZvY3VzRWxlbWVudHM6IFtcbiAgICAgICAgICAgICAgICAnYVtocmVmXScsICdhcmVhW2hyZWZdJywgJ2lucHV0Om5vdChbZGlzYWJsZWRdKTpub3QoW3R5cGU9aGlkZGVuXSknXG4gICAgICAgICAgICAgICAgLCAnYnV0dG9uOm5vdChbZGlzYWJsZWRdKScsICdzZWxlY3Q6bm90KFtkaXNhYmxlZF0pJ1xuICAgICAgICAgICAgICAgICwgJ3RleHRhcmVhOm5vdChbZGlzYWJsZWRdKScsICdpZnJhbWUnLCAnb2JqZWN0JywgJ2VtYmVkJ1xuICAgICAgICAgICAgICAgICwgJypbdGFiaW5kZXhdJywgJypbY29udGVudGVkaXRhYmxlXSdcbiAgICAgICAgICAgIF1cblxuICAgICAgICAgICAgLCBlc2NhcGVDbG9zZTogdHJ1ZVxuICAgICAgICAgICAgLCBjb250ZW50OiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgT2JqZWN0LmtleXMob3B0cyB8fCB7fSlcbiAgICAgICAgLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgICAgIGlmIChvcHRzW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0c1trZXldID0gb3B0c1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm92ZXJsYXkgPSBlbDtcbiAgICAgICAgdGhpcy5kaWFsb2cgPSBlbC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLm9wdHMuZGlhbG9nQ2xhc3N9YCk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0cy5jb250ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQodGhpcy5vcHRzLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3Blbihjb250ZW50KSB7XG4gICAgICAgIHRoaXMuY29udGVudChjb250ZW50KTtcblxuICAgICAgICBpZiAoIWlzKHRoaXMub3B0cy5iZWZvcmVPcGVuLCAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RvT3BlbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vcHRzLmJlZm9yZU9wZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZG9PcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9kb09wZW4oKSB7XG4gICAgICAgIGFkZENsYXNzKGRvY3VtZW50LmJvZHksIHRoaXMub3B0cy5ib2R5Q2xhc3MpO1xuXG4gICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZGlhbG9nLCB0aGlzLm9wdHMuZGlhbG9nQ2xvc2VDbGFzcyk7XG4gICAgICAgIGFkZENsYXNzKHRoaXMuZGlhbG9nLCB0aGlzLm9wdHMuZGlhbG9nT3BlbkNsYXNzKTtcblxuICAgICAgICB0aGlzLm92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0cy5mb2N1cykge1xuICAgICAgICAgICAgdGhpcy5mb2N1c091dEVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzKHRoaXMub3B0cy5hZnRlck9wZW4sICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICB0aGlzLm9wdHMuYWZ0ZXJPcGVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcGVuZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAoIWlzKHRoaXMub3B0cy5iZWZvcmVDbG9zZSwgJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kb0Nsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9wdHMuYmVmb3JlQ2xvc2UoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZG9DbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfZG9DbG9zZSgpIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5kaWFsb2csIHRoaXMub3B0cy5kaWFsb2dPcGVuQ2xhc3MpO1xuICAgICAgICBhZGRDbGFzcyh0aGlzLmRpYWxvZywgdGhpcy5vcHRzLmRpYWxvZ0Nsb3NlQ2xhc3MpO1xuXG4gICAgICAgIHJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksIHRoaXMub3B0cy5ib2R5Q2xhc3MpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZm9jdXMpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXModGhpcy5mb2N1c091dEVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzKHRoaXMub3B0cy5hZnRlckNsb3NlLCAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgdGhpcy5vcHRzLmFmdGVyQ2xvc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub3BlbmVkID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuXG4gICAgY29udGVudChjb250ZW50KSB7XG4gICAgICAgIGlmIChjb250ZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpYWxvZy5pbm5lckhUTUw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRpYWxvZy5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIH1cblxuICAgIGVsZW1lbnRzKHNlbGVjdG9yLCBmYWxsYmFjaykge1xuICAgICAgICBmYWxsYmFjayA9IGZhbGxiYWNrIHx8IHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdNU0lFIDkuMCcpID4gLTE7XG4gICAgICAgIHNlbGVjdG9yID0gaXMoc2VsZWN0b3IsICdhcnJheScpID8gc2VsZWN0b3Iuam9pbignLCcpIDogc2VsZWN0b3I7XG5cbiAgICAgICAgcmV0dXJuIFtdLmZpbHRlci5jYWxsKFxuICAgICAgICAgICAgdGhpcy5kaWFsb2cucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcbiAgICAgICAgICAgICwgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScgJiYgc3R5bGUudmlzaWJpbGl0eSAhPT0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0UGFyZW50ICE9PSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZvY3VzKGVsKSB7XG4gICAgICAgIGVsID0gZWwgfHwgdGhpcy5lbGVtZW50cyh0aGlzLm9wdHMuZm9jdXNFbGVtZW50cylbMF0gfHwgdGhpcy5kaWFsb2cuZmlyc3RDaGlsZDtcblxuICAgICAgICBpZiAoZWwgJiYgaXMoZWwuZm9jdXMsICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICBlbC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAga2V5ZG93bihldikge1xuICAgICAgICBpZiAodGhpcy5vcHRzLmVzY2FwZUNsb3NlICYmIGV2LndoaWNoID09IDI3KSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdG9wRXZlbnQoKSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcGVuZWQgJiYgZXYud2hpY2ggPT0gOSAmJiB0aGlzLmRpYWxvZy5jb250YWlucyhldi50YXJnZXQpKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzKHRoaXMub3B0cy5mb2N1c0VsZW1lbnRzKVxuICAgICAgICAgICAgICAgICwgZmlyc3QgPSBlbGVtZW50c1swXVxuICAgICAgICAgICAgICAgICwgbGFzdCA9IGVsZW1lbnRzW2VsZW1lbnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgICBpZiAoZmlyc3QgPT0gbGFzdCkge1xuICAgICAgICAgICAgICAgIHN0b3BFdmVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXYudGFyZ2V0ID09IGZpcnN0ICYmIGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgc3RvcEV2ZW50KCk7XG4gICAgICAgICAgICAgICAgbGFzdC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXYudGFyZ2V0ID09IGxhc3QgJiYgIWV2LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgc3RvcEV2ZW50KCk7XG4gICAgICAgICAgICAgICAgZmlyc3QuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuUk1vZGFsLnByb3RvdHlwZS52ZXJzaW9uID0gJ0BAVkVSU0lPTkBAJztcblJNb2RhbC52ZXJzaW9uID0gJ0BAVkVSU0lPTkBAJztcblxuZXhwb3J0IGRlZmF1bHQgUk1vZGFsOyJdLCJuYW1lcyI6WyJsZXQiXSwibWFwcGluZ3MiOiI7Ozs7OztJQUVBQSxJQUFJLEVBQUUsR0FBRyxVQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsU0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQSxVQUFTLEdBQUUsSUFBSSxNQUFFLENBQUMsR0FBQSxDQUFDOztBQUVqR0EsSUFBQUEsSUFBSSxRQUFRLEdBQUcsVUFBQyxFQUFFLEVBQUUsR0FBRyxFQUFFO1FBQ3JCQSxJQUFJLEdBQUcsR0FBRyxF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