{"version":3,"sources":["rmodal.js","../src/rmodal.js"],"names":["global","factory","exports","module","define","amd","RModal","this","let","is","obj","type","Object","prototype","toString","call","toLowerCase","addClass","el","cls","arr","className","split","filter","c","length","removeClass","join","opts","this$1","opened","bodyClass","dialogClass","dialogOpenClass","dialogCloseClass","focus","focusElements","escapeClose","content","keys","forEach","key","undefined","overlay","dialog","querySelector","open","beforeOpen","_doOpen","document","body","style","display","focusOutElement","activeElement","afterOpen","close","beforeClose","_doClose","afterClose","setTimeout","innerHTML","elements","selector","fallback","window","navigator","appVersion","indexOf","querySelectorAll","element","getComputedStyle","visibility","offsetParent","firstChild","keydown","ev","stopEvent","preventDefault","stopPropagation","which","contains","target","first","last","shiftKey","version"],"mappings":"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","file":"rmodal.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.RModal = factory());\n}(this, function () {\n\n    var is = function (obj, type) { return Object.prototype.toString.call(obj).toLowerCase() === (\"[object \" + type + \"]\"); };\n\n    var addClass = function (el, cls) {\n        var arr = el.className\n        .split(/\\s+/)\n        .filter(function (c) { return !!c && c == cls; });\n\n        if (!arr.length) {\n            el.className += \" \" + cls;\n        }\n    }\n\n    var removeClass = function (el, cls) {\n        el.className = el.className\n        .split(/\\s+/)\n        .filter(function (c) { return !!c && c != cls; })\n        .join(' ');\n    }\n\n    var RModal = function RModal(el, opts) {\n        var this$1 = this;\n\n        this.opened = false;\n\n        this.opts = {\n            bodyClass: 'modal-open'\n            , dialogClass: 'modal-dialog'\n            , dialogOpenClass: 'bounceInDown'\n            , dialogCloseClass: 'bounceOutUp'\n\n            , focus: true\n            , focusElements: [\n                'a[href]', 'area[href]', 'input:not([disabled]):not([type=hidden])'\n                , 'button:not([disabled])', 'select:not([disabled])'\n                , 'textarea:not([disabled])', 'iframe', 'object', 'embed'\n                , '*[tabindex]', '*[contenteditable]'\n            ]\n\n            , escapeClose: true\n            , content: null\n        };\n\n        Object.keys(opts || {})\n        .forEach(function (key) {\n            /* istanbul ignore else */\n            if (opts[key] !== undefined) {\n                this$1.opts[key] = opts[key];\n            }\n        });\n\n        this.overlay = el;\n        this.dialog = el.querySelector((\".\" + (this.opts.dialogClass)));\n\n        if (this.opts.content) {\n            this.content(this.opts.content);\n        }\n    };\n\n    RModal.prototype.open = function open (content) {\n            var this$1 = this;\n\n        this.content(content);\n\n        if (!is(this.opts.beforeOpen, 'function')) {\n            return this._doOpen();\n        }\n\n        this.opts.beforeOpen(function () {\n            this$1._doOpen();\n        });\n    };\n\n    RModal.prototype._doOpen = function _doOpen () {\n        addClass(document.body, this.opts.bodyClass);\n\n        removeClass(this.dialog, this.opts.dialogCloseClass);\n        addClass(this.dialog, this.opts.dialogOpenClass);\n\n        this.overlay.style.display = 'block';\n\n        if (this.opts.focus) {\n            this.focusOutElement = document.activeElement;\n            this.focus();\n        }\n\n        if (is(this.opts.afterOpen, 'function')) {\n            this.opts.afterOpen();\n        }\n        this.opened = true;\n    };\n\n    RModal.prototype.close = function close () {\n            var this$1 = this;\n\n        if (!is(this.opts.beforeClose, 'function')) {\n            return this._doClose();\n        }\n\n        this.opts.beforeClose(function () {\n            this$1._doClose();\n        });\n    };\n\n    RModal.prototype._doClose = function _doClose () {\n            var this$1 = this;\n\n        removeClass(this.dialog, this.opts.dialogOpenClass);\n        addClass(this.dialog, this.opts.dialogCloseClass);\n\n        removeClass(document.body, this.opts.bodyClass);\n\n        if (this.opts.focus) {\n            this.focus(this.focusOutElement);\n        }\n\n        if (is(this.opts.afterClose, 'function')) {\n            this.opts.afterClose();\n        }\n\n        this.opened = false;\n        setTimeout(function () {\n            this$1.overlay.style.display = 'none';\n        }, 500);\n    };\n\n    RModal.prototype.content = function content (content) {\n        if (content === undefined) {\n            return this.dialog.innerHTML;\n        }\n\n        this.dialog.innerHTML = content;\n    };\n\n    RModal.prototype.elements = function elements (selector, fallback) {\n        fallback = fallback || window.navigator.appVersion.indexOf('MSIE 9.0') > -1;\n        selector = is(selector, 'array') ? selector.join(',') : selector;\n\n        return [].filter.call(\n            this.dialog.querySelectorAll(selector)\n            , function (element) {\n                if (fallback) {\n                    var style = window.getComputedStyle(element);\n                    return style.display !== 'none' && style.visibility !== 'hidden';\n                }\n\n                return element.offsetParent !== null;\n            }\n        );\n    };\n\n    RModal.prototype.focus = function focus (el) {\n        el = el || this.elements(this.opts.focusElements)[0] || this.dialog.firstChild;\n\n        if (el && is(el.focus, 'function')) {\n            el.focus();\n        }\n    };\n\n    RModal.prototype.keydown = function keydown (ev) {\n        if (this.opts.escapeClose && ev.which == 27) {\n            this.close();\n        }\n\n        function stopEvent() {\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n\n        if (this.opened && ev.which == 9 && this.dialog.contains(ev.target)) {\n            var elements = this.elements(this.opts.focusElements)\n                , first = elements[0]\n                , last = elements[elements.length - 1];\n\n            if (first == last) {\n                stopEvent();\n            }\n            else if (ev.target == first && ev.shiftKey) {\n                stopEvent();\n                last.focus();\n            }\n            else if (ev.target == last && !ev.shiftKey) {\n                stopEvent();\n                first.focus();\n            }\n        }\n    };\n\n    RModal.prototype.version = '1.0.21';\n    RModal.version = '1.0.21';\n\n    return RModal;\n\n}));\n","'use strict';\n\nlet is = (obj, type) => Object.prototype.toString.call(obj).toLowerCase() === `[object ${type}]`;\n\nlet addClass = (el, cls) => {\n    let arr = el.className\n    .split(/\\s+/)\n    .filter((c) => !!c && c == cls);\n\n    if (!arr.length) {\n        el.className += ` ${cls}`;\n    }\n}\n\nlet removeClass = (el, cls) => {\n    el.className = el.className\n    .split(/\\s+/)\n    .filter((c) => !!c && c != cls)\n    .join(' ');\n}\n\nclass RModal {\n    constructor(el, opts) {\n        this.opened = false;\n\n        this.opts = {\n            bodyClass: 'modal-open'\n            , dialogClass: 'modal-dialog'\n            , dialogOpenClass: 'bounceInDown'\n            , dialogCloseClass: 'bounceOutUp'\n\n            , focus: true\n            , focusElements: [\n                'a[href]', 'area[href]', 'input:not([disabled]):not([type=hidden])'\n                , 'button:not([disabled])', 'select:not([disabled])'\n                , 'textarea:not([disabled])', 'iframe', 'object', 'embed'\n                , '*[tabindex]', '*[contenteditable]'\n            ]\n\n            , escapeClose: true\n            , content: null\n        };\n\n        Object.keys(opts || {})\n        .forEach((key) => {\n            /* istanbul ignore else */\n            if (opts[key] !== undefined) {\n                this.opts[key] = opts[key];\n            }\n        });\n\n        this.overlay = el;\n        this.dialog = el.querySelector(`.${this.opts.dialogClass}`);\n\n        if (this.opts.content) {\n            this.content(this.opts.content);\n        }\n    }\n\n    open(content) {\n        this.content(content);\n\n        if (!is(this.opts.beforeOpen, 'function')) {\n            return this._doOpen();\n        }\n\n        this.opts.beforeOpen(() => {\n            this._doOpen();\n        });\n    }\n\n    _doOpen() {\n        addClass(document.body, this.opts.bodyClass);\n\n        removeClass(this.dialog, this.opts.dialogCloseClass);\n        addClass(this.dialog, this.opts.dialogOpenClass);\n\n        this.overlay.style.display = 'block';\n\n        if (this.opts.focus) {\n            this.focusOutElement = document.activeElement;\n            this.focus();\n        }\n\n        if (is(this.opts.afterOpen, 'function')) {\n            this.opts.afterOpen();\n        }\n        this.opened = true;\n    }\n\n    close() {\n        if (!is(this.opts.beforeClose, 'function')) {\n            return this._doClose();\n        }\n\n        this.opts.beforeClose(() => {\n            this._doClose();\n        });\n    }\n\n    _doClose() {\n        removeClass(this.dialog, this.opts.dialogOpenClass);\n        addClass(this.dialog, this.opts.dialogCloseClass);\n\n        removeClass(document.body, this.opts.bodyClass);\n\n        if (this.opts.focus) {\n            this.focus(this.focusOutElement);\n        }\n\n        if (is(this.opts.afterClose, 'function')) {\n            this.opts.afterClose();\n        }\n\n        this.opened = false;\n        setTimeout(() => {\n            this.overlay.style.display = 'none';\n        }, 500);\n    }\n\n    content(content) {\n        if (content === undefined) {\n            return this.dialog.innerHTML;\n        }\n\n        this.dialog.innerHTML = content;\n    }\n\n    elements(selector, fallback) {\n        fallback = fallback || window.navigator.appVersion.indexOf('MSIE 9.0') > -1;\n        selector = is(selector, 'array') ? selector.join(',') : selector;\n\n        return [].filter.call(\n            this.dialog.querySelectorAll(selector)\n            , (element) => {\n                if (fallback) {\n                    var style = window.getComputedStyle(element);\n                    return style.display !== 'none' && style.visibility !== 'hidden';\n                }\n\n                return element.offsetParent !== null;\n            }\n        );\n    }\n\n    focus(el) {\n        el = el || this.elements(this.opts.focusElements)[0] || this.dialog.firstChild;\n\n        if (el && is(el.focus, 'function')) {\n            el.focus();\n        }\n    }\n\n    keydown(ev) {\n        if (this.opts.escapeClose && ev.which == 27) {\n            this.close();\n        }\n\n        function stopEvent() {\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n\n        if (this.opened && ev.which == 9 && this.dialog.contains(ev.target)) {\n            var elements = this.elements(this.opts.focusElements)\n                , first = elements[0]\n                , last = elements[elements.length - 1];\n\n            if (first == last) {\n                stopEvent();\n            }\n            else if (ev.target == first && ev.shiftKey) {\n                stopEvent();\n                last.focus();\n            }\n            else if (ev.target == last && !ev.shiftKey) {\n                stopEvent();\n                first.focus();\n            }\n        }\n    }\n}\n\nRModal.prototype.version = '@@VERSION@@';\nRModal.version = '@@VERSION@@';\n\nexport default RModal;"],"sourceRoot":"/source/"}